<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Puma: E:/workspace/projeto/src/plp/puma/comando/ChamadaProcedimento.java Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Packages</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<h1>E:/workspace/projeto/src/plp/puma/comando/ChamadaProcedimento.java</h1><a href="_chamada_procedimento_8java.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="keyword">package </span>plp.puma.comando;
<a name="l00002"></a>00002 
<a name="l00003"></a>00003 <span class="keyword">import</span> plp.puma.declaracao.procedimento.ListaDeclaracaoParametro;
<a name="l00004"></a>00004 <span class="keyword">import</span> plp.puma.excecao.declaracao.ClasseJaDeclaradaException;
<a name="l00005"></a>00005 <span class="keyword">import</span> plp.puma.excecao.declaracao.ClasseNaoDeclaradaException;
<a name="l00006"></a>00006 <span class="keyword">import</span> plp.puma.excecao.declaracao.ObjetoJaDeclaradoException;
<a name="l00007"></a>00007 <span class="keyword">import</span> plp.puma.excecao.declaracao.ObjetoNaoDeclaradoException;
<a name="l00008"></a>00008 <span class="keyword">import</span> plp.puma.excecao.declaracao.ProcedimentoJaDeclaradoException;
<a name="l00009"></a>00009 <span class="keyword">import</span> plp.puma.excecao.declaracao.ProcedimentoNaoDeclaradoException;
<a name="l00010"></a>00010 <span class="keyword">import</span> plp.puma.excecao.declaracao.VariavelJaDeclaradaException;
<a name="l00011"></a>00011 <span class="keyword">import</span> plp.puma.excecao.declaracao.VariavelNaoDeclaradaException;
<a name="l00012"></a>00012 <span class="keyword">import</span> plp.puma.excecao.execucao.EntradaInvalidaException;
<a name="l00013"></a>00013 <span class="keyword">import</span> plp.puma.expressao.ListaExpressao;
<a name="l00014"></a>00014 <span class="keyword">import</span> plp.puma.memoria.AmbienteCompilacao;
<a name="l00015"></a>00015 <span class="keyword">import</span> plp.puma.memoria.AmbienteExecucao;
<a name="l00016"></a>00016 <span class="keyword">import</span> plp.puma.memoria.colecao.ListaValor;
<a name="l00017"></a>00017 <span class="keyword">import</span> plp.puma.util.ListaTipo;
<a name="l00018"></a>00018 <span class="keyword">import</span> plp.puma.util.Tipo;
<a name="l00019"></a>00019 <span class="keyword">import</span> plp.puma.util.TipoClasse;
<a name="l00020"></a>00020 <span class="keyword">import</span> plp.puma.util.TipoGeneric;
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 
<a name="l00026"></a><a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html">00026</a> <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html">ChamadaProcedimento</a> <span class="keyword">implements</span> <a class="code" href="interfaceplp_1_1puma_1_1comando_1_1_comando.html">Comando</a> {
<a name="l00027"></a>00027 
<a name="l00031"></a><a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#d5b4290b9ea75cf26fa6bc2118fd417a">00031</a>     <span class="keyword">private</span> <a class="code" href="classplp_1_1puma_1_1comando_1_1_procedimento.html">Procedimento</a> <a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#d5b4290b9ea75cf26fa6bc2118fd417a">procedimento</a>;
<a name="l00032"></a>00032 
<a name="l00036"></a><a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#9be8c856a4c8b4ee3d0addf5e42922e5">00036</a>     <span class="keyword">private</span> <a class="code" href="classplp_1_1puma_1_1expressao_1_1_lista_expressao.html">ListaExpressao</a> <a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#9be8c856a4c8b4ee3d0addf5e42922e5">parametrosReais</a>;
<a name="l00037"></a>00037 
<a name="l00041"></a><a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#a04579b48124e3f7600eafb8e1fb6b25">00041</a>     <span class="keyword">private</span> <a class="code" href="classplp_1_1puma_1_1memoria_1_1colecao_1_1_lista_valor.html">ListaValor</a> <a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#a04579b48124e3f7600eafb8e1fb6b25">valoresParametros</a>;
<a name="l00042"></a>00042 
<a name="l00049"></a><a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#a36c48d85e18c741b13d5aa52f49f820">00049</a>     <span class="keyword">public</span> <a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#a36c48d85e18c741b13d5aa52f49f820">ChamadaProcedimento</a>(<a class="code" href="classplp_1_1puma_1_1comando_1_1_procedimento.html">Procedimento</a> <a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#d5b4290b9ea75cf26fa6bc2118fd417a">procedimento</a>, <a class="code" href="classplp_1_1puma_1_1expressao_1_1_lista_expressao.html">ListaExpressao</a> <a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#9be8c856a4c8b4ee3d0addf5e42922e5">parametrosReais</a>,
<a name="l00050"></a>00050                                <a class="code" href="classplp_1_1puma_1_1memoria_1_1colecao_1_1_lista_valor.html">ListaValor</a> <a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#a04579b48124e3f7600eafb8e1fb6b25">valoresParametros</a>){
<a name="l00051"></a>00051         <span class="keyword">this</span>.procedimento = <a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#d5b4290b9ea75cf26fa6bc2118fd417a">procedimento</a>;
<a name="l00052"></a>00052         <span class="keyword">this</span>.parametrosReais = <a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#9be8c856a4c8b4ee3d0addf5e42922e5">parametrosReais</a>;
<a name="l00053"></a>00053         <span class="keyword">this</span>.valoresParametros = <a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#a04579b48124e3f7600eafb8e1fb6b25">valoresParametros</a>;
<a name="l00054"></a>00054     }
<a name="l00055"></a>00055 
<a name="l00061"></a><a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#96d6587a748ff19e763c7ff52711ab96">00061</a>     <span class="keyword">public</span> <a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#a36c48d85e18c741b13d5aa52f49f820">ChamadaProcedimento</a>(<a class="code" href="classplp_1_1puma_1_1comando_1_1_procedimento.html">Procedimento</a> <a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#d5b4290b9ea75cf26fa6bc2118fd417a">procedimento</a>, <a class="code" href="classplp_1_1puma_1_1expressao_1_1_lista_expressao.html">ListaExpressao</a> <a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#9be8c856a4c8b4ee3d0addf5e42922e5">parametrosReais</a>){
<a name="l00062"></a>00062         <span class="keyword">this</span>.procedimento = <a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#d5b4290b9ea75cf26fa6bc2118fd417a">procedimento</a>;
<a name="l00063"></a>00063         <span class="keyword">this</span>.parametrosReais = <a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#9be8c856a4c8b4ee3d0addf5e42922e5">parametrosReais</a>;
<a name="l00064"></a>00064         <span class="keyword">this</span>.valoresParametros = null;
<a name="l00065"></a>00065     }
<a name="l00072"></a><a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#d846069053b2c1eae82901ee68b106fb">00072</a>     <span class="keyword">public</span> <a class="code" href="interfaceplp_1_1puma_1_1memoria_1_1_ambiente_execucao.html">AmbienteExecucao</a> <a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#d846069053b2c1eae82901ee68b106fb">executar</a>(<a class="code" href="interfaceplp_1_1puma_1_1memoria_1_1_ambiente_execucao.html">AmbienteExecucao</a> ambiente)
<a name="l00073"></a>00073         <span class="keywordflow">throws</span> <a class="code" href="classplp_1_1puma_1_1excecao_1_1declaracao_1_1_variavel_ja_declarada_exception.html">VariavelJaDeclaradaException</a>, <a class="code" href="classplp_1_1puma_1_1excecao_1_1declaracao_1_1_variavel_nao_declarada_exception.html">VariavelNaoDeclaradaException</a>,
<a name="l00074"></a>00074                <a class="code" href="classplp_1_1puma_1_1excecao_1_1declaracao_1_1_procedimento_nao_declarado_exception.html">ProcedimentoNaoDeclaradoException</a>, <a class="code" href="classplp_1_1puma_1_1excecao_1_1declaracao_1_1_procedimento_ja_declarado_exception.html">ProcedimentoJaDeclaradoException</a>,
<a name="l00075"></a>00075                <a class="code" href="classplp_1_1puma_1_1excecao_1_1declaracao_1_1_objeto_nao_declarado_exception.html">ObjetoNaoDeclaradoException</a>, <a class="code" href="classplp_1_1puma_1_1excecao_1_1declaracao_1_1_objeto_ja_declarado_exception.html">ObjetoJaDeclaradoException</a>,
<a name="l00076"></a>00076                <a class="code" href="classplp_1_1puma_1_1excecao_1_1declaracao_1_1_classe_nao_declarada_exception.html">ClasseNaoDeclaradaException</a>, <a class="code" href="classplp_1_1puma_1_1excecao_1_1declaracao_1_1_classe_ja_declarada_exception.html">ClasseJaDeclaradaException</a>, <a class="code" href="classplp_1_1puma_1_1excecao_1_1execucao_1_1_entrada_invalida_exception.html">EntradaInvalidaException</a>{
<a name="l00077"></a>00077 
<a name="l00078"></a>00078         ambiente.<a class="code" href="interfaceplp_1_1puma_1_1memoria_1_1_ambiente.html#f32616e6421181025c78f3854241e949">incrementa</a>();
<a name="l00079"></a>00079         ambiente = <a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#85abfdb42ea9c08f80a49275f6cbef84">bindParameters</a>( ambiente, <a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#d5b4290b9ea75cf26fa6bc2118fd417a">procedimento</a>.<a class="code" href="classplp_1_1puma_1_1comando_1_1_procedimento.html#26f0e64bf7e985a0ae9e067974616f83">getParametrosFormais</a>());
<a name="l00080"></a>00080         ambiente = <a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#d5b4290b9ea75cf26fa6bc2118fd417a">procedimento</a>.<a class="code" href="classplp_1_1puma_1_1comando_1_1_procedimento.html#9a317e3ae3ff9309680ed72b7324dd84">getComando</a>().<a class="code" href="interfaceplp_1_1puma_1_1comando_1_1_comando.html#23eef3102d0149e0038a1c44c064f887">executar</a>(ambiente);
<a name="l00081"></a>00081         ambiente.<a class="code" href="interfaceplp_1_1puma_1_1memoria_1_1_ambiente.html#2e81458d6a11c457c2589a6653bb9180">restaura</a>();
<a name="l00082"></a>00082         <span class="keywordflow">return</span> ambiente;
<a name="l00083"></a>00083     }
<a name="l00084"></a>00084 
<a name="l00089"></a><a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#85abfdb42ea9c08f80a49275f6cbef84">00089</a>     <span class="keyword">private</span> <a class="code" href="interfaceplp_1_1puma_1_1memoria_1_1_ambiente_execucao.html">AmbienteExecucao</a> <a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#85abfdb42ea9c08f80a49275f6cbef84">bindParameters</a> (<a class="code" href="interfaceplp_1_1puma_1_1memoria_1_1_ambiente_execucao.html">AmbienteExecucao</a> ambiente, <a class="code" href="classplp_1_1puma_1_1declaracao_1_1procedimento_1_1_lista_declaracao_parametro.html">ListaDeclaracaoParametro</a> parametrosFormais)
<a name="l00090"></a>00090         <span class="keywordflow">throws</span> <a class="code" href="classplp_1_1puma_1_1excecao_1_1declaracao_1_1_variavel_ja_declarada_exception.html">VariavelJaDeclaradaException</a>, <a class="code" href="classplp_1_1puma_1_1excecao_1_1declaracao_1_1_variavel_nao_declarada_exception.html">VariavelNaoDeclaradaException</a>,
<a name="l00091"></a>00091                <a class="code" href="classplp_1_1puma_1_1excecao_1_1declaracao_1_1_objeto_nao_declarado_exception.html">ObjetoNaoDeclaradoException</a>{
<a name="l00092"></a>00092         <a class="code" href="classplp_1_1puma_1_1memoria_1_1colecao_1_1_lista_valor.html">ListaValor</a> listaValor = <span class="keyword">this</span>.valoresParametros;
<a name="l00093"></a>00093         <span class="keywordflow">if</span>(listaValor == null) {
<a name="l00094"></a>00094             listaValor = <a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#9be8c856a4c8b4ee3d0addf5e42922e5">parametrosReais</a>.<a class="code" href="classplp_1_1puma_1_1expressao_1_1_lista_expressao.html#ede8f33e48438e880d8c89ef6b7265fa">avaliar</a>(ambiente);
<a name="l00095"></a>00095         }
<a name="l00096"></a>00096         <span class="keywordflow">while</span> (listaValor.length() &gt; 0){
<a name="l00097"></a>00097             ambiente.mapValor (parametrosFormais.getHead().getId(), listaValor.getHead());
<a name="l00098"></a>00098             parametrosFormais = ((<a class="code" href="classplp_1_1puma_1_1declaracao_1_1procedimento_1_1_lista_declaracao_parametro.html">ListaDeclaracaoParametro</a>) parametrosFormais.getTail());
<a name="l00099"></a>00099             listaValor = (<a class="code" href="classplp_1_1puma_1_1memoria_1_1colecao_1_1_lista_valor.html">ListaValor</a>)listaValor.getTail();
<a name="l00100"></a>00100         }
<a name="l00101"></a>00101         <span class="keywordflow">return</span> ambiente;
<a name="l00102"></a>00102     }
<a name="l00103"></a>00103 
<a name="l00115"></a><a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#ee189b213fef682a60a98e41e8d2896f">00115</a>      <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#ee189b213fef682a60a98e41e8d2896f">checaTipo</a>(<a class="code" href="interfaceplp_1_1puma_1_1memoria_1_1_ambiente_compilacao.html">AmbienteCompilacao</a> ambiente)
<a name="l00116"></a>00116         <span class="keywordflow">throws</span> <a class="code" href="classplp_1_1puma_1_1excecao_1_1declaracao_1_1_variavel_nao_declarada_exception.html">VariavelNaoDeclaradaException</a>, <a class="code" href="classplp_1_1puma_1_1excecao_1_1declaracao_1_1_variavel_ja_declarada_exception.html">VariavelJaDeclaradaException</a>,
<a name="l00117"></a>00117                <a class="code" href="classplp_1_1puma_1_1excecao_1_1declaracao_1_1_procedimento_nao_declarado_exception.html">ProcedimentoNaoDeclaradoException</a>,<a class="code" href="classplp_1_1puma_1_1excecao_1_1declaracao_1_1_classe_nao_declarada_exception.html">ClasseNaoDeclaradaException</a> {
<a name="l00118"></a>00118         <span class="keywordtype">boolean</span> resposta;
<a name="l00119"></a>00119         ambiente.incrementa();
<a name="l00120"></a>00120         <a class="code" href="classplp_1_1puma_1_1declaracao_1_1procedimento_1_1_lista_declaracao_parametro.html">ListaDeclaracaoParametro</a> parametrosFormais = <a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#d5b4290b9ea75cf26fa6bc2118fd417a">procedimento</a>.<a class="code" href="classplp_1_1puma_1_1comando_1_1_procedimento.html#26f0e64bf7e985a0ae9e067974616f83">getParametrosFormais</a>();
<a name="l00121"></a>00121         <a class="code" href="classplp_1_1puma_1_1util_1_1_lista_tipo.html">ListaTipo</a> listaTipo = <a class="code" href="classplp_1_1puma_1_1comando_1_1_chamada_procedimento.html#9be8c856a4c8b4ee3d0addf5e42922e5">parametrosReais</a>.<a class="code" href="classplp_1_1puma_1_1expressao_1_1_lista_expressao.html#85186d4ec5f9ec8e30027934c1ac8e20">getTipos</a>(ambiente);
<a name="l00122"></a>00122         <span class="comment">//tem o mesmo numero de parametros formais e reais?</span>
<a name="l00123"></a>00123         <span class="keywordflow">if</span>(listaTipo.<a class="code" href="classplp_1_1puma_1_1util_1_1_lista_tipo.html#82befe7ecbb82d520fcc66a1e072e4aa">length</a>() == parametrosFormais.length()) {
<a name="l00124"></a>00124             <span class="comment">// a funcao tem algum parametro?</span>
<a name="l00125"></a>00125             <span class="keywordflow">if</span>(listaTipo.<a class="code" href="classplp_1_1puma_1_1util_1_1_lista_tipo.html#76d52068e9179e6c282e04d4ef2b38ff">head</a>() == null || parametrosFormais.getHead() == null) {
<a name="l00126"></a>00126                 resposta = <span class="keyword">true</span>;
<a name="l00127"></a>00127             }
<a name="l00128"></a>00128             <span class="keywordflow">else</span> {
<a name="l00129"></a>00129                 resposta = <span class="keyword">true</span>;
<a name="l00130"></a>00130                 <span class="comment">// tem parametros formais de tipos diferentes</span>
<a name="l00131"></a>00131                 <span class="comment">// de parametros reais na ordem em que se apresentam?</span>
<a name="l00132"></a>00132                 <span class="keywordflow">while</span>(listaTipo != null &amp;&amp; parametrosFormais != null) {
<a name="l00133"></a>00133                     
<a name="l00134"></a>00134                     <span class="comment">//Pegar os parametros do metodo</span>
<a name="l00135"></a>00135                     <a class="code" href="interfaceplp_1_1puma_1_1util_1_1_tipo.html">Tipo</a> tpf = parametrosFormais.getHead().getTipo();
<a name="l00136"></a>00136                     <a class="code" href="interfaceplp_1_1puma_1_1util_1_1_tipo.html">Tipo</a> tpr = listaTipo.<a class="code" href="classplp_1_1puma_1_1util_1_1_lista_tipo.html#76d52068e9179e6c282e04d4ef2b38ff">head</a>();
<a name="l00137"></a>00137                     
<a name="l00138"></a>00138                     <span class="comment">//TODO e se for um TipoGenericClasse</span>
<a name="l00139"></a>00139                     <span class="keywordflow">if</span> (tpf instanceof <a class="code" href="classplp_1_1puma_1_1util_1_1_tipo_generic.html">TipoGeneric</a> &amp;&amp; tpr instanceof <a class="code" href="classplp_1_1puma_1_1util_1_1_tipo_classe.html">TipoClasse</a>) {
<a name="l00140"></a>00140                         tpf = ambiente.getTipoReal( tpf);
<a name="l00141"></a>00141                         tpf = <span class="keyword">new</span> TipoClasse( (<a class="code" href="classplp_1_1puma_1_1util_1_1_tipo_generic.html">TipoGeneric</a>)tpf);
<a name="l00142"></a>00142                     }
<a name="l00143"></a>00143                     
<a name="l00144"></a>00144                     <span class="keywordflow">if</span>( ! tpr.<a class="code" href="interfaceplp_1_1puma_1_1util_1_1_tipo.html#5c3cb5c511e51c808623592e46f041fa">equals</a>( tpf)) {
<a name="l00145"></a>00145                         resposta = <span class="keyword">false</span>;
<a name="l00146"></a>00146                         <span class="keywordflow">break</span>;
<a name="l00147"></a>00147                     }
<a name="l00148"></a>00148                     listaTipo = listaTipo.<a class="code" href="classplp_1_1puma_1_1util_1_1_lista_tipo.html#b040376a7313ea1e5a032100bb507067">tail</a>();
<a name="l00149"></a>00149                     parametrosFormais = ((<a class="code" href="classplp_1_1puma_1_1declaracao_1_1procedimento_1_1_lista_declaracao_parametro.html">ListaDeclaracaoParametro</a>) parametrosFormais.getTail());
<a name="l00150"></a>00150                 }
<a name="l00151"></a>00151             }
<a name="l00152"></a>00152         }
<a name="l00153"></a>00153         <span class="keywordflow">else</span> {
<a name="l00154"></a>00154             resposta = <span class="keyword">false</span>;
<a name="l00155"></a>00155         }
<a name="l00156"></a>00156         ambiente.restaura();
<a name="l00157"></a>00157         <span class="keywordflow">return</span> resposta;
<a name="l00158"></a>00158     }
<a name="l00159"></a>00159 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Jul 25 10:02:25 2006 for Puma by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
